<div class="app-container">
  <!-- Header -->
  <header class="app-header">
    <img src="/public/favicon.ico" alt="Logo" class="logo">
    <h1>Live-Thought Research Assistant</h1>
  </header>

  <!-- Query Input -->
  <div class="query-container">
    <input
      type="text"
      class="query-input"
      placeholder="Ask a research question..."
      [(ngModel)]="query"
      (keyup.enter)="startSearch()"
      [disabled]="isLoading"
    />
    <button (click)="startSearch()" [disabled]="isLoading" class="query-button">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /></svg>
    </button>
  </div>

  <!-- Main Content Area -->
  <main class="main-content">
    <!-- Answer Panel -->
    <div class="panel answer-panel">
      <div class="panel-header">
        <h2>Answer</h2>
      </div>
      <div class="panel-content">
        <div *ngIf="finalAnswer" class="prose" [innerHTML]="finalAnswer"></div>
        <div *ngIf="!finalAnswer && !isLoading" class="empty-state">
          <p>Your research answer will appear here.</p>
        </div>
      </div>
    </div>

    <!-- Right Column (Thoughts & Citations) -->
    <div class="right-column">
      <!-- Thoughts Panel -->
      <div class="panel thoughts-panel">
        <div class="panel-header">
          <h2>Thoughts</h2>
          <div *ngIf="isLoading" class="loader-container">
            <div class="square-loader">
              <div class="dot dot-1"></div>
              <div class="dot dot-2"></div>
              <div class="dot dot-3"></div>
            </div>
          </div>
        </div>
        <div class="panel-content thought-list">
          <div *ngIf="liveThought" class="thought-item live-thought">{{ liveThought }}</div>
          <div *ngIf="thoughts.length === 0 && !isLoading" class="empty-state">
            <p>The agent's reasoning process will appear here.</p>
          </div>
          <div *ngFor="let thought of thoughts" class="thought-item">
            {{ thought }}
          </div>
        </div>
      </div>

      <!-- Citations Panel -->
      <div class="panel citations-panel">
        <div class="panel-header">
          <h2>Citations</h2>
        </div>
        <div class="panel-content">
          <div *ngIf="citations.length === 0" class="empty-state">
            <p>Cited sources will appear here.</p>
          </div>
          <div *ngFor="let citation of citations" class="citation-item">
            <a [href]="citation.url" target="_blank">{{ citation.title }}</a>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>


